<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Andy's Terminal - ADwalk: simple PowerShell script to enumate Active Directory</title>
        <meta property="og:title" content="Andy's Terminal - ADwalk: simple PowerShell script to enumate Active Directory" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://andy.codes/content/blog/2023-01-12-adwalk.html" />
        <meta property="og:image" content="https://andy.codes/assets/img/adwalk/adwalk_demo.png"/>
        <meta property="og:image:width" content="988" />
        <meta property="og:image:height" content="605" />

        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta http-equiv="Cache-control" content="no-cache, no-store, must-revalidate">
        <meta http-equiv="Pragma" content="no-cache">

        <link rel="icon" type="image/x-icon" href="/assets/img/favicon.ico" />
        <link href="/assets/css/styles.css" rel="stylesheet">
        <link href="/assets/css/lightbox.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/506cba49ac.js" crossorigin="anonymous"></script>
        <script src="/assets/js/lightbox-plus-jquery.min.js"></script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script
            async
            src="https://www.googletagmanager.com/gtag/js?id=G-Q6PN1HTQ5K"
        ></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());

            gtag("config", "G-Q6PN1HTQ5K");
        </script>
    </head>
    <body class="terminal-main">
        <div class="container-fluid">
        <div class="row">
            <div class="col-sm-2 offset-sm-2 col-2">
                <a href="https://twitter.com/0x4ndy"><i class="fa-brands fa-square-twitter"></i></a>
                <a href="https://github.com/0x4ndy"><i class="fa-brands fa-square-github"></i></a>
                <a href="https://infosec.exchange/@0x4ndy"><i class="fa-brands fa-mastodon"></i></a>
            </div>
            <div class="col-sm-2 offset-sm-4 col-8 offset-2 terminal-menu">
                <a href="/">&#47;home</a> <a href="/content/projects">&#47;projects</a> <a href="/content/blog">&#47;blog</a> 
            </div>
        </div>
            <div class="row">
                <div class="col-sm-8 offset-sm-2 col-xs-4 offset-xs-7">
                    <h1 class="text-center">ADwalk: simple PowerShell script to enumate Active Directory</h1>
                    <div class="text-center">(<a href="/content/blog">back</a>)</div>
                    <br />
                    <div class="section-content">
                        One of the things that became apparent to me (which also came as a surprise) since I've started my journey with offensive security was that Windows systems and <code>Active Directory</code> are absolutely everywhere. Most of the systems you will ever get to hack as an offensive security professional are going to be on Windows.
                    </div>
                    <br />
                    <div class="section-content">
                        Probably the best tool for AD enumeration out there is the <code>PowerView</code>, however, to start using it you need to first transfer it to the target machine, just to do some basic enumerations, which sometimes is not ideal and can be problematic. I've noticed that often instead, a pentester will write a small script in <code>PowerShell</code> to start a simple enumeration of <code>AD</code>, just to see if there's anything there worth the attention. I've started practicing this approach myself and I find it much quicker - once I'm on a target system with access to <code>PowerShell</code>, I can write a short code and run it on that system to get the basic detains about <code>AD</code>.
                    </div>
                    <br/>
                    <div class="section-content">
                        Having this in mind, I've created a small <code>PowerShell</code> tool, called <code>adwalk</code>, which allows me to do just that. The main purpose of it is to display all <code>OUs</code> (Organization Units) in the Active Directory you are currently connected to, but you can also supply a filter in case you're looking for something specific, like an SQL server. Here's how it works:
                    </div>
                    <br/>
                    <div class="section-content">
                        Here an example of how to use it:
                    </div>
                    <br/>
                    <div class="section-content">
                        <pre>
                        PS C:\> .\adwalk -filter "serviceprincipalname=*sql*"
                        </pre>
                    </div>
                    <br />
                    <div class="section-content">
                        <h2 class="color-blue">Here's a quick demo:</h2>
                    </div>
                    <div class="section-content">
                        <a href="/assets/img/adwalk/adwalk_demo.png" data-lightbox="img" data-title=""><img class="ui bordered small image" src="/assets/img/adwalk/adwalk_demo.png"></a>
                    </div>
                    <br />
                    <div class="section-content">
                        For more details, head to the <a href="https://github.com/0x4ndy/adwalk">GitHub repo</a>.
                    </div>
                    <br />
                </div>
            </div>
            <div class="row">
                <div class="col-sm-8 offset-sm-2 col-xs-4 offset-xs-7">
                    <span class="color-green">0x4ndy:<span class="color-blue">~</span></span><span class="fa-solid fa-terminal color-blue"></span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-8 offset-sm-2 col-xs-4 offset-xs-7">
                    <script src="https://giscus.app/client.js"
                        data-repo="0x4ndy/0x4ndy.github.io"
                        data-repo-id="MDEwOlJlcG9zaXRvcnkzNDQyNzE0NTQ="
                        data-category="General"
                        data-category-id="DIC_kwDOFIUqXs4CWs5W"
                        data-mapping="title"
                        data-strict="1"
                        data-reactions-enabled="1"
                        data-emit-metadata="0"
                        data-input-position="top"
                        data-theme="preferred_color_scheme"
                        data-lang="en"
                        data-loading="lazy"
                        crossorigin="anonymous"
                        async>
                    </script>
                </div>
            </div>
        </div>
    </body>
</html>
